<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
</head>
<body>
        <div class="container">
            <div class="row">
                <div class="bg-container col-md-12" id="bgcontainer">
                    <h1 class="heading  text-center m-4 text-dark">find the population of a countery</h1>
                    <input  type="search" id="search1" class="search w-100  fs-5 pl-3" placeholder="search for a countery">
                    
                </div>
            </div>

            <div class="spinner" id="spinner"></div>
                <div class="countery-information " id="counteryInformation">
                    

        
                </div>
           

        </div>
         
       <!-- bellow the line javaScript code will start -->
    
    <script>
        let spner = document.getElementById("spinner")
       let search = document.getElementById("search1");
let counteryInformation = document.getElementById("counteryInformation");

function getandappend(data) {
    for (let i of data) {
         spner.classList.remove("spinner")
        let dataInfoContainer = document.createElement("div");
        dataInfoContainer.classList.add("m-3", "bg-dark", "d-flex", "justify-content-between", "f-row", "p-3");
        counteryInformation.appendChild(dataInfoContainer);

        let flegcontainer = document.createElement("div");
        flegcontainer.classList.add("flegcontainer");
        dataInfoContainer.appendChild(flegcontainer);

        let flagimg = document.createElement("img");
        flagimg.style.height = "50px";
        flagimg.src = i.flag;
        flegcontainer.appendChild(flagimg);

        let populationcontainer = document.createElement("div");
        populationcontainer.style.padding = "10px";
        populationcontainer.style.textAlign = "center"

        dataInfoContainer.appendChild(populationcontainer);

        let counteryname = document.createElement("h1");
        counteryname.textContent = i.name;
        counteryname.style.fontSize = "20px";
        counteryname.style.color = "#FFFF";
        counteryname.style.fontWeight = "bold";
        counteryname.style.textAlign = "center";
        populationcontainer.appendChild(counteryname);

        let population = document.createElement("p");
        population.textContent = i.population;
        population.style.fontSize = "20px";
        population.style.color = "#FFFF";
        population.style.fontWeight = "bold";
        populationcontainer.appendChild(population);
        console.log(i.name)
    }
    
    
}

search.addEventListener("keydown", function (event) {
      
    spner.classList.add("spinner")
    
    


    if (event.key === "Enter") {
        counteryInformation.textContent = "" 
        
        
        let searchvalue = search.value;
        let finalsearchValue = searchvalue.charAt(0).toUpperCase() + searchvalue.slice(1);
       
        

        let url = "https://apis.ccbp.in/countries-data";
        fetch(url)
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
               
                for (let i of data) {
                    
                    
                    if((i.name).includes(finalsearchValue)){
                        
                        
                        spner.classList.remove("spinner")
        let dataInfoContainer = document.createElement("div");
        dataInfoContainer.classList.add("m-3", "bg-dark", "d-flex", "justify-content-between", "f-row", "p-3");
        counteryInformation.appendChild(dataInfoContainer);

        let flegcontainer = document.createElement("div");
        flegcontainer.classList.add("flegcontainer");
        dataInfoContainer.appendChild(flegcontainer);

        let flagimg = document.createElement("img");
        flagimg.style.height = "50px";
        flagimg.src = i.flag;
        flegcontainer.appendChild(flagimg);

        let populationcontainer = document.createElement("div");
        populationcontainer.style.padding = "10px";
        populationcontainer.style.textAlign = "center"

        dataInfoContainer.appendChild(populationcontainer);

        let counteryname = document.createElement("h1");
        counteryname.textContent = i.name;
        counteryname.style.fontSize = "20px";
        counteryname.style.color = "#FFFF";
        counteryname.style.fontWeight = "bold";
        counteryname.style.textAlign = "center";
        populationcontainer.appendChild(counteryname);

        let population = document.createElement("p");
        population.textContent = i.population;
        population.style.fontSize = "20px";
        population.style.color = "#FFFF";
        population.style.fontWeight = "bold";
        populationcontainer.appendChild(population);
                    }
                        
                    }
       




                
            });
           
    }
        if(search.value === ""){
            spner.classList.remove("spinner")
        let url = "https://apis.ccbp.in/countries-data";
        fetch(url)
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                
                

                getandappend(data);
            });
      
   

    }
    spner.classList.add("spinner")
   
});
   
        let url = "https://apis.ccbp.in/countries-data";
        fetch(url)
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                
                

                getandappend(data);
            });
            
            
   
    </script>
</body>
</html>
